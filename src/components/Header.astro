---
import { leagues } from '../data/leagues';

const base = import.meta.env.BASE_URL;
const currentPath = Astro.url.pathname;

// Normalise base for comparison (strip trailing slash)
const basePath = base.replace(/\/$/, '');
const isHome = currentPath === base || currentPath === basePath || currentPath === '/';
---

<header class="border-b border-gray-800 bg-[#0d0d0d]/90 backdrop-blur sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-6 py-3 flex items-center gap-6">

    <!-- Logo -->
    <a href={base} class="flex items-center gap-2 shrink-0">
      <span class="text-[#e94560] text-lg leading-none">âš½</span>
      <span class="text-sm font-bold tracking-wide text-white">
        SHARPS<span class="text-[#e94560]">.</span>INTEL
      </span>
    </a>

    <!-- League Nav -->
    <nav class="flex items-center gap-1 overflow-x-auto flex-1" style="scrollbar-width:none">
      <a
        href={base}
        class={`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-colors ${
          isHome
            ? 'bg-[#e94560] text-white'
            : 'text-gray-400 hover:text-white hover:bg-gray-800'
        }`}
      >
        All
      </a>

      {leagues.map((league) => {
        const isActive = currentPath.includes(`/${league.slug}`);
        return (
          <a
            href={league.active ? `${basePath}/${league.slug}` : undefined}
            class={`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-colors flex items-center gap-1.5 ${
              league.active
                ? isActive
                  ? 'bg-[#e94560] text-white'
                  : 'text-gray-400 hover:text-white hover:bg-gray-800'
                : 'text-gray-700 cursor-default'
            }`}
          >
            <span>{league.flag}</span>
            <span>{league.shortName}</span>
          </a>
        );
      })}
    </nav>

  </div>
</header>
